<UserControl x:Class="KawaiiStudio.App.Views.LayoutView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#F6F2EA">
  <Grid>
    <Image Source="{Binding BackgroundPath, Converter={StaticResource FilePathToImage}}"
           Stretch="UniformToFill"
           Opacity="0.9" />
    <Rectangle Fill="#CCF6F2EA" />
    <Grid Margin="24">
      <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
        <TextBlock Text="Pick a 4x6 Layout" FontSize="32" FontWeight="SemiBold" Margin="0,0,0,32" />
        <!-- Three Layout Options -->
        <ItemsControl ItemsSource="{Binding VisibleOptions}"
                     HorizontalAlignment="Center">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" />
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <StackPanel Margin="24" HorizontalAlignment="Center">
                <Button Command="{Binding DataContext.SelectLayoutCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                        CommandParameter="{Binding}"
                        Padding="0"
                        Background="Transparent"
                        BorderThickness="0"
                        Cursor="Hand"
                        Opacity="1.0">
                  <Button.Effect>
                    <DropShadowEffect Color="#40000000" BlurRadius="12" ShadowDepth="6" />
                  </Button.Effect>
                  <Button.Style>
                    <Style TargetType="Button">
                      <Setter Property="Template">
                        <Setter.Value>
                          <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}"
                                    CornerRadius="16"
                                    Padding="{TemplateBinding Padding}">
                              <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                          </ControlTemplate>
                        </Setter.Value>
                      </Setter>
                      <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                          <Setter Property="Effect">
                            <Setter.Value>
                              <DropShadowEffect Color="#50000000" BlurRadius="14" ShadowDepth="7" />
                            </Setter.Value>
                          </Setter>
                        </Trigger>
                      </Style.Triggers>
                    </Style>
                  </Button.Style>
                  <Image Stretch="Uniform" Opacity="1.0" MaxWidth="450" MaxHeight="650">
                    <Image.Style>
                      <Style TargetType="Image">
                        <Setter Property="Source" Value="{Binding DataContext.TwoSlotsFrame, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource FilePathToImage}}" />
                        <Style.Triggers>
                          <DataTrigger Binding="{Binding Slots}" Value="2">
                            <Setter Property="Source" Value="{Binding DataContext.TwoSlotsFrame, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource FilePathToImage}}" />
                          </DataTrigger>
                          <DataTrigger Binding="{Binding Slots}" Value="4">
                            <Setter Property="Source" Value="{Binding DataContext.FourSlotsFrame, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource FilePathToImage}}" />
                          </DataTrigger>
                          <DataTrigger Binding="{Binding Slots}" Value="6">
                            <Setter Property="Source" Value="{Binding DataContext.SixSlotsFrame, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource FilePathToImage}}" />
                          </DataTrigger>
                        </Style.Triggers>
                      </Style>
                    </Image.Style>
                  </Image>
                </Button>
                <TextBlock HorizontalAlignment="Center" 
                          Margin="0,16,0,0"
                          FontSize="24"
                          FontWeight="SemiBold"
                          Foreground="#333333">
                  <TextBlock.Style>
                    <Style TargetType="TextBlock">
                      <Setter Property="Text" Value="Style A" />
                      <Style.Triggers>
                        <DataTrigger Binding="{Binding Slots}" Value="4">
                          <Setter Property="Text" Value="Style B" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Slots}" Value="6">
                          <Setter Property="Text" Value="Style C" />
                        </DataTrigger>
                      </Style.Triggers>
                    </Style>
                  </TextBlock.Style>
                </TextBlock>
              </StackPanel>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
        <Button Content="Back" 
                Command="{Binding BackCommand}" 
                Margin="0,32,0,0"
                Padding="24,12"
                Background="#E7DFD6"
                Foreground="#333333"
                BorderThickness="0"
                FontSize="18"
                FontWeight="SemiBold"
                Cursor="Hand">
          <Button.Effect>
            <DropShadowEffect Color="#20000000" BlurRadius="6" ShadowDepth="3" />
          </Button.Effect>
          <Button.Style>
            <Style TargetType="Button">
              <Setter Property="Template">
                <Setter.Value>
                  <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            CornerRadius="8"
                            Padding="{TemplateBinding Padding}">
                      <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                  </ControlTemplate>
                </Setter.Value>
              </Setter>
              <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                  <Setter Property="Background" Value="#DDD5CC" />
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                  <Setter Property="Background" Value="#CCC4BB" />
                </Trigger>
              </Style.Triggers>
            </Style>
          </Button.Style>
        </Button>
      </StackPanel>
    </Grid>
  </Grid>
</UserControl>


