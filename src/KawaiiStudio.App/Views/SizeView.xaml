<UserControl x:Class="KawaiiStudio.App.Views.SizeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:models="clr-namespace:KawaiiStudio.App.Models"
             Background="#F6F2EA">
  <Grid>
    <Image Source="{Binding BackgroundPath, Converter={StaticResource FilePathToImage}}"
           Stretch="UniformToFill"
           Opacity="0.9" />
    <Rectangle Fill="#CCF6F2EA" />
    <Grid Margin="24">
      <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
        <TextBlock Text="Choose Print Size" FontSize="32" FontWeight="SemiBold" Margin="0,0,0,32" />
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
          <!-- 2x6 Button with Frame Preview -->
          <Button Command="{Binding SelectSizeCommand}" CommandParameter="{x:Static models:PrintSize.TwoBySix}" 
                  Padding="0" Background="#EEE7DD" BorderThickness="0" Cursor="Hand" Margin="0,0,48,0" Width="500">
            <Button.Effect>
              <DropShadowEffect Color="#40000000" BlurRadius="8" ShadowDepth="4" />
            </Button.Effect>
            <Button.Style>
              <Style TargetType="Button">
                <Setter Property="Template">
                  <Setter.Value>
                    <ControlTemplate TargetType="Button">
                      <Border Background="{TemplateBinding Background}"
                              CornerRadius="12"
                              Padding="{TemplateBinding Padding}"
                              Width="500">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                      </Border>
                    </ControlTemplate>
                  </Setter.Value>
                </Setter>
                <Style.Triggers>
                  <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F5EEDD" />
                    <Setter Property="Effect">
                      <Setter.Value>
                        <DropShadowEffect Color="#50000000" BlurRadius="10" ShadowDepth="5" />
                      </Setter.Value>
                    </Setter>
                  </Trigger>
                  <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#DDD5CC" />
                    <Setter Property="Effect">
                      <Setter.Value>
                        <DropShadowEffect Color="#30000000" BlurRadius="6" ShadowDepth="2" />
                      </Setter.Value>
                    </Setter>
                  </Trigger>
                </Style.Triggers>
              </Style>
            </Button.Style>
            <StackPanel>
              <Border CornerRadius="12" Padding="24" Width="500" Height="700" Background="Transparent">
                <Grid>
                  <Image x:Name="TwoBySixImage"
                         Source="{Binding CurrentTwoBySixFrame, Converter={StaticResource FilePathToImage}}" 
                         Stretch="Uniform"
                         Opacity="1.0" />
                  <TextBlock Text="No preview available" 
                           FontSize="14" Foreground="#B8B8B8" 
                           HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock.Style>
                      <Style TargetType="TextBlock">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Style.Triggers>
                          <DataTrigger Binding="{Binding CurrentTwoBySixFrame}" Value="{x:Null}">
                            <Setter Property="Visibility" Value="Visible" />
                          </DataTrigger>
                          <DataTrigger Binding="{Binding CurrentTwoBySixFrame}" Value="">
                            <Setter Property="Visibility" Value="Visible" />
                          </DataTrigger>
                        </Style.Triggers>
                      </Style>
                    </TextBlock.Style>
                  </TextBlock>
                </Grid>
              </Border>
              <TextBlock Text="2x6" FontSize="36" FontWeight="SemiBold" 
                       HorizontalAlignment="Center" Margin="0,24,0,0" />
            </StackPanel>
          </Button>

          <!-- 4x6 Button with Frame Preview -->
          <Button Command="{Binding SelectSizeCommand}" CommandParameter="{x:Static models:PrintSize.FourBySix}" 
                  Padding="0" Background="#EEE7DD" BorderThickness="0" Cursor="Hand" Width="500">
            <Button.Effect>
              <DropShadowEffect Color="#40000000" BlurRadius="8" ShadowDepth="4" />
            </Button.Effect>
            <Button.Style>
              <Style TargetType="Button">
                <Setter Property="Template">
                  <Setter.Value>
                    <ControlTemplate TargetType="Button">
                      <Border Background="{TemplateBinding Background}"
                              CornerRadius="12"
                              Padding="{TemplateBinding Padding}"
                              Width="500">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                      </Border>
                    </ControlTemplate>
                  </Setter.Value>
                </Setter>
                <Style.Triggers>
                  <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#F5EEDD" />
                    <Setter Property="Effect">
                      <Setter.Value>
                        <DropShadowEffect Color="#50000000" BlurRadius="10" ShadowDepth="5" />
                      </Setter.Value>
                    </Setter>
                  </Trigger>
                  <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#DDD5CC" />
                    <Setter Property="Effect">
                      <Setter.Value>
                        <DropShadowEffect Color="#30000000" BlurRadius="6" ShadowDepth="2" />
                      </Setter.Value>
                    </Setter>
                  </Trigger>
                </Style.Triggers>
              </Style>
            </Button.Style>
            <StackPanel>
              <Border CornerRadius="12" Padding="24" Width="500" Height="700" Background="Transparent">
                <Grid>
                  <Image x:Name="FourBySixImage"
                         Source="{Binding CurrentFourBySixFrame, Converter={StaticResource FilePathToImage}}" 
                         Stretch="Uniform"
                         Opacity="1.0" />
                  <TextBlock Text="No preview available" 
                           FontSize="14" Foreground="#B8B8B8" 
                           HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock.Style>
                      <Style TargetType="TextBlock">
                        <Setter Property="Visibility" Value="Collapsed" />
                        <Style.Triggers>
                          <DataTrigger Binding="{Binding CurrentFourBySixFrame}" Value="{x:Null}">
                            <Setter Property="Visibility" Value="Visible" />
                          </DataTrigger>
                          <DataTrigger Binding="{Binding CurrentFourBySixFrame}" Value="">
                            <Setter Property="Visibility" Value="Visible" />
                          </DataTrigger>
                        </Style.Triggers>
                      </Style>
                    </TextBlock.Style>
                  </TextBlock>
                </Grid>
              </Border>
              <TextBlock Text="4x6" FontSize="36" FontWeight="SemiBold" 
                       HorizontalAlignment="Center" Margin="0,24,0,0" />
            </StackPanel>
          </Button>
        </StackPanel>
        <Button Content="Back" 
                Command="{Binding BackCommand}" 
                Margin="0,32,0,0"
                Padding="24,12"
                Background="#E7DFD6"
                Foreground="#333333"
                BorderThickness="0"
                FontSize="18"
                FontWeight="SemiBold"
                Cursor="Hand">
          <Button.Effect>
            <DropShadowEffect Color="#20000000" BlurRadius="6" ShadowDepth="3" />
          </Button.Effect>
          <Button.Style>
            <Style TargetType="Button">
              <Setter Property="Template">
                <Setter.Value>
                  <ControlTemplate TargetType="Button">
                    <Border Background="{TemplateBinding Background}"
                            CornerRadius="8"
                            Padding="{TemplateBinding Padding}">
                      <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                  </ControlTemplate>
                </Setter.Value>
              </Setter>
              <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                  <Setter Property="Background" Value="#DDD5CC" />
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                  <Setter Property="Background" Value="#CCC4BB" />
                </Trigger>
              </Style.Triggers>
            </Style>
          </Button.Style>
        </Button>
      </StackPanel>
    </Grid>
    <Button Command="{Binding StaffCommand}"
            Width="80"
            Height="80"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Background="Transparent"
            BorderThickness="0"
            Padding="0"
            Margin="0"
            Opacity="0" />
    <Grid Background="#80000000"
          Visibility="{Binding IsStaffPinPromptVisible, Converter={StaticResource BoolToVisibility}}"
          Panel.ZIndex="2">
      <Button Command="{Binding StaffPinCancelCommand}"
              Background="Transparent"
              BorderThickness="0" />
      <Border Background="#EEE7DD"
              CornerRadius="12"
              Padding="16"
              Width="420"
              Panel.ZIndex="1"
              HorizontalAlignment="Center"
              VerticalAlignment="Center">
        <StackPanel>
          <TextBlock Text="Staff PIN" FontSize="18" FontWeight="SemiBold" />
          <TextBlock Text="Enter the staff PIN to continue" FontSize="12" Foreground="#8A8A8A" Margin="0,6,0,0" />
          <Border Background="#E2D9CF" CornerRadius="6" Padding="10" Margin="0,10,0,8">
            <TextBlock Text="{Binding StaffPinDisplay}" FontSize="20" />
          </Border>
          <TextBlock Text="{Binding StaffPinError}" FontSize="12" Foreground="#B91C1C" Margin="0,0,0,8" />
          <UniformGrid Rows="4" Columns="3" Margin="0,0,0,12">
            <Button Content="1" Command="{Binding StaffPinInputCommand}" CommandParameter="1" Padding="12,10" />
            <Button Content="2" Command="{Binding StaffPinInputCommand}" CommandParameter="2" Padding="12,10" />
            <Button Content="3" Command="{Binding StaffPinInputCommand}" CommandParameter="3" Padding="12,10" />
            <Button Content="4" Command="{Binding StaffPinInputCommand}" CommandParameter="4" Padding="12,10" />
            <Button Content="5" Command="{Binding StaffPinInputCommand}" CommandParameter="5" Padding="12,10" />
            <Button Content="6" Command="{Binding StaffPinInputCommand}" CommandParameter="6" Padding="12,10" />
            <Button Content="7" Command="{Binding StaffPinInputCommand}" CommandParameter="7" Padding="12,10" />
            <Button Content="8" Command="{Binding StaffPinInputCommand}" CommandParameter="8" Padding="12,10" />
            <Button Content="9" Command="{Binding StaffPinInputCommand}" CommandParameter="9" Padding="12,10" />
            <Button Content="CLR" Command="{Binding StaffPinClearCommand}" Padding="12,10" />
            <Button Content="0" Command="{Binding StaffPinInputCommand}" CommandParameter="0" Padding="12,10" />
            <Button Content="DEL" Command="{Binding StaffPinBackspaceCommand}" Padding="12,10" />
          </UniformGrid>
          <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Cancel" Command="{Binding StaffPinCancelCommand}" Padding="16,8" />
            <Button Content="Enter" Command="{Binding StaffPinConfirmCommand}" Padding="16,8" Margin="8,0,0,0" Width="120" />
          </StackPanel>
        </StackPanel>
      </Border>
    </Grid>
  </Grid>
</UserControl>


